(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9431],{8169:function(e,s,t){Promise.resolve().then(t.bind(t,1096))},1096:function(e,s,t){"use strict";var r=t(7437),n=t(5373),a=t(2265),i=t(7138),c=t(1761),l=t(4837),o=t(7197),u=t(747),d=t(1826);s.default=()=>{let[e,s]=(0,a.useState)(!1),[t,f]=(0,a.useState)(""),[m,p]=(0,a.useState)(""),[x,h]=(0,a.useState)(""),[j,y]=(0,a.useState)(!1),[g,S]=(0,a.useState)(!1),[N,b]=(0,a.useState)(!1),[w,v]=(0,a.useState)("required"),[E,A]=(0,a.useState)(!1),_=(0,a.useRef)(null);(0,a.useEffect)(()=>{j&&g&&N?s(!0):s(!1)},[j,g,N]);let k=async e=>{var s,t;if(e.preventDefault(),A(!0),"success"!==w){(0,c.Jc)("Подтвердите, что вы не робот"),A(!1),null===(s=_.current)||void 0===s||s.reset();return}let r=new FormData(e.currentTarget),{message:n,success:a}=await (0,u.Z)({name:r.get("name"),email:r.get("email"),password:r.get("password"),token:r.get("cf-turnstile-response")},"/api/auth/signup","POST","/sign-up","Произошла ошибка при регистрации. Попробуйте еще раз позже.");if(A(!1),!a){(0,c.Jc)(n),v("required"),null===(t=_.current)||void 0===t||t.reset();return}(0,c.Qm)(n)};return(0,r.jsx)(n.f,{children:(0,r.jsxs)("form",{onSubmit:k,className:"flex flex-col gap-4",children:[(0,r.jsx)(o.XV,{error:t,setError:f,setValid:y}),(0,r.jsx)(o.U5,{error:m,setError:p,setValid:S}),(0,r.jsx)(o.WU,{error:x,setError:h,setValid:b}),(0,r.jsx)(d.Nc,{siteKey:"0x4AAAAAAAzEFS4LT44gpBU1",ref:_,onError:()=>v("error"),onExpire:()=>v("expired"),onSuccess:()=>v("success"),options:{language:"ru-ru",size:"flexible"}}),(0,r.jsx)("div",{className:"my-4",children:(0,r.jsxs)("p",{className:"text-sm max-w-prose",children:['Нажимая кнопку "Зарегистрироваться", вы соглашаетесь с'," ",(0,r.jsx)(i.default,{href:"/terms-of-service",className:"text-[--primary] font-semibold underline",children:"Пользовательским соглашением"})," ","и"," ",(0,r.jsx)(i.default,{href:"/privacy-policy",className:"text-[--primary] font-semibold underline",children:"Политикой конфиденциальности"}),"."]})}),(0,r.jsx)(l.M,{loading:E,action:"Зарегистрироваться",disabled:!e,classNames:{button:"py-3",container:"py-3 text-sm",spinner:"size-5 border-2"}}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsxs)("p",{className:"text-sm",children:["Уже есть аккаунт?"," ",(0,r.jsx)(i.default,{href:"/login",className:"text-[--primary] font-semibold",children:"Войти"})]})})]})})}},747:function(e,s,t){"use strict";async function r(e,s,t,r,n){window.history.replaceState(null,"",r);try{let r=await fetch(s,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await r.json()}catch(e){return console.error("[".concat(t,"] ").concat(s,":"),e),{message:n,success:!1}}}t.d(s,{Z:function(){return r}})}},function(e){e.O(0,[231,7776,7090,224,6835,2971,7023,1744],function(){return e(e.s=8169)}),_N_E=e.O()}]);